"use strict";(self.webpackChunkrancher_docs=self.webpackChunkrancher_docs||[]).push([[91789],{3905:(e,r,n)=>{n.d(r,{Zo:()=>c,kt:()=>d});var t=n(67294);function o(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function a(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function s(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?a(Object(n),!0).forEach((function(r){o(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function i(e,r){if(null==e)return{};var n,t,o=function(e,r){if(null==e)return{};var n,t,o={},a=Object.keys(e);for(t=0;t<a.length;t++)n=a[t],r.indexOf(n)>=0||(o[n]=e[n]);return o}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(t=0;t<a.length;t++)n=a[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var u=t.createContext({}),l=function(e){var r=t.useContext(u),n=r;return e&&(n="function"==typeof e?e(r):s(s({},r),e)),n},c=function(e){var r=l(e.components);return t.createElement(u.Provider,{value:r},e.children)},p={inlineCode:"code",wrapper:function(e){var r=e.children;return t.createElement(t.Fragment,{},r)}},h=t.forwardRef((function(e,r){var n=e.components,o=e.mdxType,a=e.originalType,u=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),h=l(n),d=o,m=h["".concat(u,".").concat(d)]||h[d]||p[d]||a;return n?t.createElement(m,s(s({ref:r},c),{},{components:n})):t.createElement(m,s({ref:r},c))}));function d(e,r){var n=arguments,o=r&&r.mdxType;if("string"==typeof e||o){var a=n.length,s=new Array(a);s[0]=h;var i={};for(var u in r)hasOwnProperty.call(r,u)&&(i[u]=r[u]);i.originalType=e,i.mdxType="string"==typeof e?e:o,s[1]=i;for(var l=2;l<a;l++)s[l]=n[l];return t.createElement.apply(null,s)}return t.createElement.apply(null,n)}h.displayName="MDXCreateElement"},4975:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>c,contentTitle:()=>u,default:()=>d,frontMatter:()=>i,metadata:()=>l,toc:()=>p});n(67294);var t=n(3905);function o(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function a(e,r){return r=null!=r?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):function(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})),e}function s(e,r){if(null==e)return{};var n,t,o=function(e,r){if(null==e)return{};var n,t,o={},a=Object.keys(e);for(t=0;t<a.length;t++)n=a[t],r.indexOf(n)>=0||(o[n]=e[n]);return o}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(t=0;t<a.length;t++)n=a[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}const i={title:"Launching Kubernetes with Rancher"},u=void 0,l={unversionedId:"pages-for-subheaders/launch-kubernetes-with-rancher",id:"pages-for-subheaders/launch-kubernetes-with-rancher",title:"Launching Kubernetes with Rancher",description:"You can have Rancher launch a Kubernetes cluster using any nodes you want. When Rancher deploys Kubernetes onto these nodes, you can choose between Rancher Kubernetes Engine (RKE) or RKE2 distributions. Rancher can launch Kubernetes on any computers, including:",source:"@site/docs/pages-for-subheaders/launch-kubernetes-with-rancher.md",sourceDirName:"pages-for-subheaders",slug:"/pages-for-subheaders/launch-kubernetes-with-rancher",permalink:"/pages-for-subheaders/launch-kubernetes-with-rancher",draft:!1,editUrl:"https://github.com/rancher/rancher-docs/edit/main/docs/pages-for-subheaders/launch-kubernetes-with-rancher.md",tags:[],version:"current",lastUpdatedAt:1685572449,formattedLastUpdatedAt:"May 31, 2023",frontMatter:{title:"Launching Kubernetes with Rancher"},sidebar:"tutorialSidebar",previous:{title:"Registering Existing Clusters",permalink:"/how-to-guides/new-user-guides/kubernetes-clusters-in-rancher-setup/register-existing-clusters"},next:{title:"Launching Kubernetes on New Nodes in an Infrastructure Provider",permalink:"/pages-for-subheaders/use-new-nodes-in-an-infra-provider"}},c={},p=[{value:"RKE",id:"rke",level:2},{value:"Requirements",id:"requirements",level:3},{value:"Launching Kubernetes on New Nodes in an Infrastructure Provider",id:"launching-kubernetes-on-new-nodes-in-an-infrastructure-provider",level:3},{value:"Launching Kubernetes on Existing Custom Nodes",id:"launching-kubernetes-on-existing-custom-nodes",level:3},{value:"Programmatically Creating RKE Clusters",id:"programmatically-creating-rke-clusters",level:3},{value:"RKE2",id:"rke2",level:2},{value:"Requirements",id:"requirements-1",level:3},{value:"Launching Kubernetes on New Nodes in an Infrastructure Provider",id:"launching-kubernetes-on-new-nodes-in-an-infrastructure-provider-1",level:3},{value:"Launching Kubernetes on Existing Custom Nodes",id:"launching-kubernetes-on-existing-custom-nodes-1",level:3},{value:"Programmatically Creating RKE2 Clusters",id:"programmatically-creating-rke2-clusters",level:3}],h={toc:p};function d(e){var{components:r}=e,n=s(e,["components"]);return(0,t.kt)("wrapper",a(function(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},t=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),t.forEach((function(r){o(e,r,n[r])}))}return e}({},h,n),{components:r,mdxType:"MDXLayout"}),(0,t.kt)("p",null,"You can have Rancher launch a Kubernetes cluster using any nodes you want. When Rancher deploys Kubernetes onto these nodes, you can choose between ",(0,t.kt)("a",{parentName:"p",href:"https://rancher.com/docs/rke/latest/en/"},"Rancher Kubernetes Engine")," (RKE) or ",(0,t.kt)("a",{parentName:"p",href:"https://docs.rke2.io"},"RKE2")," distributions. Rancher can launch Kubernetes on any computers, including:"),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},"Bare-metal servers"),(0,t.kt)("li",{parentName:"ul"},"On-premise virtual machines"),(0,t.kt)("li",{parentName:"ul"},"Virtual machines hosted by an infrastructure provider")),(0,t.kt)("p",null,"Rancher can install Kubernetes on existing nodes, or it can dynamically provision nodes in an infrastructure provider and install Kubernetes on them."),(0,t.kt)("p",null,"Rancher can also create pools of nodes. One benefit of installing Kubernetes on node pools hosted by an infrastructure provider is that if a node loses connectivity with the cluster, Rancher can automatically create another node to join the cluster to ensure that the count of the node pool is as expected."),(0,t.kt)("h2",{id:"rke"},"RKE"),(0,t.kt)("h3",{id:"requirements"},"Requirements"),(0,t.kt)("p",null,"If you use RKE to set up a cluster, your nodes must meet the ",(0,t.kt)("a",{parentName:"p",href:"/how-to-guides/new-user-guides/kubernetes-clusters-in-rancher-setup/node-requirements-for-rancher-managed-clusters"},"requirements")," for nodes in downstream user clusters."),(0,t.kt)("h3",{id:"launching-kubernetes-on-new-nodes-in-an-infrastructure-provider"},"Launching Kubernetes on New Nodes in an Infrastructure Provider"),(0,t.kt)("p",null,"Using Rancher, you can create pools of nodes based on a ",(0,t.kt)("a",{parentName:"p",href:"/pages-for-subheaders/use-new-nodes-in-an-infra-provider#node-templates"},"node template"),". This node template defines the parameters you want to use to launch nodes in your cloud providers."),(0,t.kt)("p",null,"One benefit of installing Kubernetes on node pools hosted by an infrastructure provider is that if a node loses connectivity with the cluster, Rancher can automatically create another node to join the cluster to ensure that the count of the node pool is as expected."),(0,t.kt)("p",null,"For more information, refer to the section on ",(0,t.kt)("a",{parentName:"p",href:"/pages-for-subheaders/use-new-nodes-in-an-infra-provider"},"launching Kubernetes on new nodes.")),(0,t.kt)("h3",{id:"launching-kubernetes-on-existing-custom-nodes"},"Launching Kubernetes on Existing Custom Nodes"),(0,t.kt)("p",null,"In this scenario, you want to install Kubernetes on bare-metal servers, on-prem virtual machines, or virtual machines that already exist in a cloud provider. With this option, you will run a Rancher agent Docker container on the machine."),(0,t.kt)("p",null,"If you want to reuse a node from a previous custom cluster, ",(0,t.kt)("a",{parentName:"p",href:"/how-to-guides/new-user-guides/manage-clusters/clean-cluster-nodes"},"clean the node")," before using it in a cluster again. If you reuse a node that hasn't been cleaned, cluster provisioning may fail."),(0,t.kt)("p",null,"For more information, refer to the section on ",(0,t.kt)("a",{parentName:"p",href:"/pages-for-subheaders/use-existing-nodes"},"custom nodes.")),(0,t.kt)("h3",{id:"programmatically-creating-rke-clusters"},"Programmatically Creating RKE Clusters"),(0,t.kt)("p",null,"The most common way to programmatically deploy RKE clusters through Rancher is by using the Rancher2 Terraform provider. The documentation for creating clusters with Terraform is ",(0,t.kt)("a",{parentName:"p",href:"https://registry.terraform.io/providers/rancher/rancher2/latest/docs/resources/cluster"},"here.")),(0,t.kt)("h2",{id:"rke2"},"RKE2"),(0,t.kt)("p",null,"Rancher v2.6 introduced provisioning for ",(0,t.kt)("a",{parentName:"p",href:"https://docs.rke2.io/"},"RKE2")," clusters directly from the Rancher UI. RKE2, also known as RKE Government, is a fully conformant Kubernetes distribution that focuses on security and compliance within the U.S. Federal Government sector. In Rancher v.2.6.4 and earlier, RKE2 provisioning was in tech preview."),(0,t.kt)("p",null,"Note that in Rancher v2.6.5, RKE2 provisioning became GA."),(0,t.kt)("h3",{id:"requirements-1"},"Requirements"),(0,t.kt)("p",null,"If you use RKE2 to set up a cluster, your nodes must meet the ",(0,t.kt)("a",{parentName:"p",href:"https://docs.rke2.io/install/requirements"},"requirements")," for nodes in downstream user clusters."),(0,t.kt)("h3",{id:"launching-kubernetes-on-new-nodes-in-an-infrastructure-provider-1"},"Launching Kubernetes on New Nodes in an Infrastructure Provider"),(0,t.kt)("p",null,"RKE2 provisioning is built on top of a new provisioning framework that leverages the upstream ",(0,t.kt)("a",{parentName:"p",href:"https://github.com/kubernetes-sigs/cluster-api"},"Cluster API")," project. With this new provisioning framework, you can:"),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},"Provision RKE2 clusters onto any provider for which Rancher has a node driver"),(0,t.kt)("li",{parentName:"ul"},"Fully configure RKE2 clusters within Rancher"),(0,t.kt)("li",{parentName:"ul"},"Choose CNI options Calico, Cilium, and Multus in addition to Canal")),(0,t.kt)("p",null,"RKE2 provisioning also includes installing RKE2 on clusters with Windows nodes."),(0,t.kt)("p",null,"Windows features for RKE2 include:"),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},"Windows supports the vSphere node driver"),(0,t.kt)("li",{parentName:"ul"},"Calico CNI for Windows RKE2 custom clusters"),(0,t.kt)("li",{parentName:"ul"},"Project Network Isolation (PNI) for Calico"),(0,t.kt)("li",{parentName:"ul"},"Windows Containers with RKE2 powered by containerd"),(0,t.kt)("li",{parentName:"ul"},"Provisioning of Windows RKE2 clusters through Terraform"),(0,t.kt)("li",{parentName:"ul"},"Provisioning of Windows RKE2 custom clusters directly from the Rancher UI")),(0,t.kt)("p",null,"Windows Support for RKE2 Custom Clusters requires choosing Calico as the CNI."),(0,t.kt)("h3",{id:"launching-kubernetes-on-existing-custom-nodes-1"},"Launching Kubernetes on Existing Custom Nodes"),(0,t.kt)("p",null,"RKE2 provisioning also allows you to install custom clusters on pre-provisioned VMs or bare-metal nodes."),(0,t.kt)("p",null,"If you want to reuse a node from a previous custom cluster, clean the node before using it in a cluster again. If you reuse a node that hasn't been cleaned, cluster provisioning may fail."),(0,t.kt)("h3",{id:"programmatically-creating-rke2-clusters"},"Programmatically Creating RKE2 Clusters"),(0,t.kt)("p",null,"The most common way to programmatically deploy RKE2 clusters through Rancher is by using the Rancher2 Terraform provider. The documentation for creating clusters with Terraform is ",(0,t.kt)("a",{parentName:"p",href:"https://registry.terraform.io/providers/rancher/rancher2/latest/docs/resources/cluster_v2"},"here.")))}d.isMDXComponent=!0}}]);