"use strict";(self.webpackChunkrancher_docs=self.webpackChunkrancher_docs||[]).push([[1847],{3905:(e,t,r)=>{r.d(t,{Zo:()=>u,kt:()=>d});var o=r(67294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,o,n=function(e,t){if(null==e)return{};var r,o,n={},i=Object.keys(e);for(o=0;o<i.length;o++)r=i[o],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var c=o.createContext({}),p=function(e){var t=o.useContext(c),r=t;return e&&(r="function"==typeof e?e(t):a(a({},t),e)),r},u=function(e){var t=p(e.components);return o.createElement(c.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},l=o.forwardRef((function(e,t){var r=e.components,n=e.mdxType,i=e.originalType,c=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),l=p(r),d=n,f=l["".concat(c,".").concat(d)]||l[d]||m[d]||i;return r?o.createElement(f,a(a({ref:t},u),{},{components:r})):o.createElement(f,a({ref:t},u))}));function d(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=r.length,a=new Array(i);a[0]=l;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:n,a[1]=s;for(var p=2;p<i;p++)a[p]=r[p];return o.createElement.apply(null,a)}return o.createElement.apply(null,r)}l.displayName="MDXCreateElement"},21811:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>u,contentTitle:()=>c,default:()=>d,frontMatter:()=>s,metadata:()=>p,toc:()=>m});r(67294);var o=r(3905);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}function a(e,t){if(null==e)return{};var r,o,n=function(e,t){if(null==e)return{};var r,o,n={},i=Object.keys(e);for(o=0;o<i.length;o++)r=i[o],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}const s={title:"ServiceMonitor and PodMonitor Configuration"},c=void 0,p={unversionedId:"reference-guides/monitoring-v2-configuration/servicemonitors-and-podmonitors",id:"reference-guides/monitoring-v2-configuration/servicemonitors-and-podmonitors",title:"ServiceMonitor and PodMonitor Configuration",description:"ServiceMonitors and PodMonitors are both pseudo-CRDs that map the scrape configuration of the Prometheus custom resource.",source:"@site/docs/reference-guides/monitoring-v2-configuration/servicemonitors-and-podmonitors.md",sourceDirName:"reference-guides/monitoring-v2-configuration",slug:"/reference-guides/monitoring-v2-configuration/servicemonitors-and-podmonitors",permalink:"/reference-guides/monitoring-v2-configuration/servicemonitors-and-podmonitors",draft:!1,editUrl:"https://github.com/rancher/rancher-docs/edit/main/docs/reference-guides/monitoring-v2-configuration/servicemonitors-and-podmonitors.md",tags:[],version:"current",lastUpdatedAt:1666730461,formattedLastUpdatedAt:"Oct 25, 2022",frontMatter:{title:"ServiceMonitor and PodMonitor Configuration"},sidebar:"tutorialSidebar",previous:{title:"Route Configuration",permalink:"/reference-guides/monitoring-v2-configuration/routes"},next:{title:"Helm Chart Options",permalink:"/reference-guides/monitoring-v2-configuration/helm-chart-options"}},u={},m=[{value:"ServiceMonitors",id:"servicemonitors",level:3},{value:"PodMonitors",id:"podmonitors",level:3}],l={toc:m};function d(e){var{components:t}=e,r=a(e,["components"]);return(0,o.kt)("wrapper",i(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},o=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),o.forEach((function(t){n(e,t,r[t])}))}return e}({},l,r),{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"ServiceMonitors and PodMonitors are both pseudo-CRDs that map the scrape configuration of the Prometheus custom resource."),(0,o.kt)("p",null,"These configuration objects declaratively specify the endpoints that Prometheus will scrape metrics from."),(0,o.kt)("p",null,"ServiceMonitors are more commonly used than PodMonitors, and we recommend them for most use cases."),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"This section assumes familiarity with how monitoring components work together. For more information about Alertmanager, see ",(0,o.kt)("a",{parentName:"p",href:"/integrations-in-rancher/monitoring-and-alerting/how-monitoring-works"},"this section."))),(0,o.kt)("h3",{id:"servicemonitors"},"ServiceMonitors"),(0,o.kt)("p",null,"This pseudo-CRD maps to a section of the Prometheus custom resource configuration. It declaratively specifies how groups of Kubernetes services should be monitored."),(0,o.kt)("p",null,"When a ServiceMonitor is created, the Prometheus Operator updates the Prometheus scrape configuration to include the ServiceMonitor configuration. Then Prometheus begins scraping metrics from the endpoint defined in the ServiceMonitor."),(0,o.kt)("p",null,"Any Services in your cluster that match the labels located within the ServiceMonitor ",(0,o.kt)("inlineCode",{parentName:"p"},"selector")," field will be monitored based on the ",(0,o.kt)("inlineCode",{parentName:"p"},"endpoints")," specified on the ServiceMonitor. For more information on what fields can be specified, please look at the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/prometheus-operator/prometheus-operator/blob/master/Documentation/api.md#servicemonitor"},"spec")," provided by Prometheus Operator."),(0,o.kt)("p",null,"For more information about how ServiceMonitors work, refer to the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/prometheus-operator/prometheus-operator/blob/master/Documentation/user-guides/running-exporters.md"},"Prometheus Operator documentation.")),(0,o.kt)("h3",{id:"podmonitors"},"PodMonitors"),(0,o.kt)("p",null,"This pseudo-CRD maps to a section of the Prometheus custom resource configuration. It declaratively specifies how group of pods should be monitored."),(0,o.kt)("p",null,"When a PodMonitor is created, the Prometheus Operator updates the Prometheus scrape configuration to include the PodMonitor configuration. Then Prometheus begins scraping metrics from the endpoint defined in the PodMonitor."),(0,o.kt)("p",null,"Any Pods in your cluster that match the labels located within the PodMonitor ",(0,o.kt)("inlineCode",{parentName:"p"},"selector")," field will be monitored based on the ",(0,o.kt)("inlineCode",{parentName:"p"},"podMetricsEndpoints")," specified on the PodMonitor. For more information on what fields can be specified, please look at the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/prometheus-operator/prometheus-operator/blob/master/Documentation/api.md#podmonitorspec"},"spec")," provided by Prometheus Operator."))}d.isMDXComponent=!0}}]);